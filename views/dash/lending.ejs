<%- include ('./modules/header.ejs') %>

      <div style="margin-left: 280px; padding: 20px;">
        <div id="alertL"></div>
        <h4 style="color: #23a7ff;">Empréstimos</h4>
        <a class="btn btn-pr" style="margin-bottom: 10px; float: right;" data-bs-toggle="modal" data-bs-target="#lendingModal"><i class="fa-solid fa-plus"></i> Registrar</a>
        <button class="btn btn-danger" style="float: right; margin-right: 10px;" data-bs-toggle="modal" data-bs-target="#returnBook"><i class="fa-solid fa-rotate-left"></i> Devolver</button>
        <div class="container" style="margin-top: 20px;">
            <div class="row">
              <div class="col" style="background-color: #3A4046; border-radius: 5px; padding: 10px;">
                  <table class="table table-striped table-bordered" style="margin-top: 10px;" id="emTable">
                <thead>
                  <tr>
                    <th scope="col">Livro</th>
                    <th scope="col">Aluno</th>
                    <th scope="col">Empréstimo</th>
                    <th scope="col">Devolução</th>
                    <th scope="col">Estado</th>
                  </tr>
                </thead>
                <tbody>
                 
                    <% em.forEach(em => { %>
                    <tr>
                    <td><%= em.book_title %></td>
                    <td><%= em.student_name %></td>
                    <td><%= em.em_date %></td>
                    <td><%= em.dv_date %></td>
                    <% if(em.status == 0){ %>
                    <td style="width: 10px;"><span class="badge bg-danger">A Devolver</span></td>
                    <% }else{%>
                    <td style="width: 10px;"><span class="badge bg-success">Devolvido</span></td>
                    <% }%>
                  </tr>
                    <% })%>
                  
                </tbody>
              </table>
              </div>
            </div>
          </div>
      </div>
      <script>$(document).ready( function () {
        $('#emTable').DataTable();
      } );</script>

     
      <%- include ('./modals/lending.ejs') %>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</html>